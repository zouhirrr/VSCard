<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>خالد المنصوري | مستشار أعمال</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --gold: #B8932A; --gold-light: #D4AF5A; --gold-pale: #F5EDD6;
    --dark: #1A1A1A; --text: #2C2C2C; --muted: #7A7A7A;
    --white: #FFFFFF; --cream: #FAFAF7; --border: #E8E2D5;
  }
  html, body {
    min-height: 100vh; font-family: 'Tajawal', sans-serif;
    background: var(--cream); display: flex;
    align-items: center; justify-content: center; padding: 20px;
  }
  body::before {
    content: ''; position: fixed; inset: 0;
    background: radial-gradient(ellipse 80% 60% at 20% 0%, rgba(184,147,42,0.07) 0%, transparent 60%),
                radial-gradient(ellipse 60% 50% at 80% 100%, rgba(184,147,42,0.05) 0%, transparent 60%);
    pointer-events: none; z-index: 0;
  }
  .card {
    position: relative; z-index: 1; width: 100%; max-width: 420px;
    background: var(--white); border-radius: 28px; overflow: hidden;
    box-shadow: 0 4px 6px rgba(0,0,0,0.02), 0 20px 60px rgba(0,0,0,0.08), 0 0 0 1px rgba(184,147,42,0.12);
    animation: slideUp 0.9s cubic-bezier(0.16, 1, 0.3, 1) both;
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(40px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  /* HEADER */
  .header {
    position: relative; padding: 48px 36px 36px;
    background: var(--dark); overflow: hidden; cursor: pointer;
    user-select: none;
  }
  .header::before {
    content: ''; position: absolute; top: -60px; left: -60px;
    width: 260px; height: 260px; border-radius: 50%;
    background: radial-gradient(circle, rgba(184,147,42,0.18) 0%, transparent 70%);
  }
  .header::after {
    content: ''; position: absolute; bottom: -40px; right: -40px;
    width: 180px; height: 180px; border-radius: 50%;
    background: radial-gradient(circle, rgba(184,147,42,0.10) 0%, transparent 70%);
  }
  .gold-line {
    position: absolute; top: 0; right: 0; left: 0; height: 3px;
    background: linear-gradient(90deg, transparent, var(--gold), var(--gold-light), var(--gold), transparent);
  }

  /* Flip card */
  .flip-area { perspective: 900px; display: inline-block; margin-bottom: 24px; position: relative; }
  .flip-inner {
    position: relative; width: 88px; height: 88px;
    transform-style: preserve-3d;
    transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .flip-area.flipped .flip-inner { transform: rotateY(180deg); }
  .flip-front, .flip-back {
    position: absolute; inset: 0; backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    display: flex; align-items: center; justify-content: center;
  }
  .flip-front {
    border-radius: 50%;
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
    font-size: 34px; font-weight: 800; color: var(--dark);
    box-shadow: 0 0 0 3px rgba(184,147,42,0.3), 0 0 0 6px rgba(184,147,42,0.1);
  }
  .flip-back {
    transform: rotateY(180deg);
    background: white; border: 2.5px solid var(--gold);
    border-radius: 14px; overflow: hidden;
  }
  .flip-back canvas, .flip-back img { width: 82px !important; height: 82px !important; display: block; }
  .flip-hint {
    position: absolute; bottom: -18px; left: 50%; transform: translateX(-50%);
    font-size: 9px; color: rgba(255,255,255,0.35); white-space: nowrap;
    letter-spacing: 0.5px; font-weight: 500; transition: opacity 0.3s;
  }
  .flip-area.flipped .flip-hint { opacity: 0; }

  .header-meta { position: relative; z-index: 1; }
  .name { font-size: 26px; font-weight: 800; color: var(--white); letter-spacing: -0.5px; line-height: 1.2; animation: fadeIn 1s 0.4s both; }
  .name span { color: var(--gold-light); }
  .status-row { display: flex; align-items: center; gap: 6px; margin-top: 6px; animation: fadeIn 1s 0.5s both; }
  .status-dot { width: 8px; height: 8px; background: #2ECC71; border-radius: 50%; flex-shrink: 0; }
  .title { font-size: 14px; font-weight: 400; color: rgba(255,255,255,0.55); letter-spacing: 0.5px; }
  .company-badge {
    display: inline-flex; align-items: center; gap: 6px; margin-top: 14px; padding: 6px 14px;
    background: rgba(184,147,42,0.15); border: 1px solid rgba(184,147,42,0.3);
    border-radius: 100px; animation: fadeIn 1s 0.6s both;
  }
  .company-badge span { font-size: 13px; font-weight: 500; color: var(--gold-light); }

  /* BODY */
  .body { padding: 28px 28px 0; }
  .section-label {
    font-size: 11px; font-weight: 700; letter-spacing: 2px; color: var(--gold);
    margin-bottom: 14px; opacity: 0; animation: fadeIn 0.8s 0.5s forwards;
  }
  .contact-list { display: flex; flex-direction: column; gap: 10px; margin-bottom: 28px; }
  .contact-item {
    display: flex; align-items: center; gap: 14px; padding: 14px 16px;
    border-radius: 14px; background: var(--cream); border: 1px solid var(--border);
    text-decoration: none; transition: all 0.25s ease; opacity: 0; animation: fadeIn 0.7s forwards;
  }
  .contact-item:hover {
    background: var(--gold-pale); border-color: var(--gold-light);
    transform: translateX(-3px); box-shadow: 0 4px 20px rgba(184,147,42,0.12);
  }
  .icon-wrap {
    width: 42px; height: 42px; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .icon-wrap.phone    { background: linear-gradient(135deg, #1a1a2e, #2d2d44); }
  .icon-wrap.email    { background: linear-gradient(135deg, #1a2e1a, #2d442d); }
  .icon-wrap.web      { background: linear-gradient(135deg, #1a1a2e, #2a2a4a); }
  .icon-wrap.whatsapp { background: linear-gradient(135deg, #0d1f12, #1a3d24); }
  .icon-wrap.linkedin { background: linear-gradient(135deg, #0a1628, #0e2241); }
  .contact-info { flex: 1; min-width: 0; }
  .contact-label { font-size: 11px; color: var(--muted); font-weight: 500; margin-bottom: 2px; }
  .contact-value { font-size: 14px; font-weight: 600; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; direction: ltr; text-align: right; }
  .contact-value.ar { direction: rtl; text-align: right; }
  .arrow { color: var(--gold); font-size: 16px; opacity: 0.6; }

  .divider { height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 0 28px 24px; }

  .expertise-section { padding: 0 28px 24px; opacity: 0; animation: fadeIn 0.8s 0.85s forwards; }
  .tags { display: flex; flex-wrap: wrap; gap: 8px; }
  .tag {
    padding: 6px 14px; border-radius: 100px; font-size: 12px; font-weight: 600;
    background: var(--cream); border: 1px solid var(--border); color: var(--text);
    transition: all 0.2s; cursor: default;
  }
  .tag:hover { background: var(--gold-pale); border-color: var(--gold); color: var(--gold); }

  /* CTA */
  .cta-section { padding: 0 28px 28px; opacity: 0; animation: fadeIn 0.8s 1s forwards; }
  .btn-row { display: flex; gap: 10px; }
  .btn-save, .btn-qr {
    padding: 16px; border-radius: 16px; border: none;
    font-family: 'Tajawal', sans-serif; font-size: 15px; font-weight: 700;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    gap: 8px; transition: all 0.3s ease; position: relative; overflow: hidden;
  }
  .btn-save { flex: 1; background: linear-gradient(135deg, var(--dark) 0%, #333 100%); color: var(--white); }
  .btn-save:hover { background: linear-gradient(135deg, var(--gold), var(--gold-light)); transform: translateY(-2px); box-shadow: 0 8px 30px rgba(184,147,42,0.35); }
  .btn-qr { width: 56px; min-width: 56px; padding: 0; background: var(--cream); border: 1.5px solid var(--border); color: var(--text); }
  .btn-qr:hover { background: var(--gold-pale); border-color: var(--gold); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(184,147,42,0.18); }
  .btn-save:active, .btn-qr:active { transform: translateY(0); }

  /* FOOTER */
  .footer { padding: 16px 28px 20px; border-top: 1px solid var(--border); text-align: center; }
  .footer p { font-size: 11px; color: var(--muted); }
  .footer strong { color: var(--gold); font-weight: 700; }

  /* ══ QR OVERLAY SHEET ══ */
  .qr-overlay {
    position: fixed; inset: 0; z-index: 200;
    background: rgba(10,10,10,0.6); backdrop-filter: blur(8px);
    display: flex; align-items: flex-end; justify-content: center;
    opacity: 0; pointer-events: none;
    transition: opacity 0.35s ease;
  }
  .qr-overlay.open { opacity: 1; pointer-events: all; }
  .qr-sheet {
    width: 100%; max-width: 440px; background: var(--white);
    border-radius: 28px 28px 0 0; padding: 12px 32px 44px;
    transform: translateY(110%);
    transition: transform 0.45s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 -8px 40px rgba(0,0,0,0.15);
  }
  .qr-overlay.open .qr-sheet { transform: translateY(0); }
  .sheet-handle {
    width: 40px; height: 4px; border-radius: 100px;
    background: var(--border); margin: 0 auto 24px;
  }
  .qr-title { font-size: 20px; font-weight: 800; color: var(--dark); text-align: center; margin-bottom: 4px; }
  .qr-sub { font-size: 13px; color: var(--muted); text-align: center; margin-bottom: 32px; }

  /* Gold frame for QR */
  .qr-frame-wrap {
    display: flex; align-items: center; justify-content: center;
    margin-bottom: 16px; position: relative;
  }
  .qr-gold-frame {
    position: relative; padding: 10px; border-radius: 20px;
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 50%, var(--gold) 100%);
    box-shadow: 0 8px 32px rgba(184,147,42,0.35), 0 0 0 1px rgba(184,147,42,0.2);
    animation: shimmer 3s ease-in-out infinite;
  }
  @keyframes shimmer {
    0%, 100% { box-shadow: 0 8px 32px rgba(184,147,42,0.35); }
    50%       { box-shadow: 0 8px 48px rgba(212,175,90,0.55); }
  }
  .qr-inner {
    background: white; border-radius: 12px; overflow: hidden;
    width: 180px; height: 180px;
    display: flex; align-items: center; justify-content: center;
  }
  .qr-inner canvas, .qr-inner img { display: block; }

  /* Scan animation */
  .scan-line {
    position: absolute; left: 10px; right: 10px; height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold-light), transparent);
    top: 10px; border-radius: 2px;
    animation: scanDown 2.5s ease-in-out infinite;
    pointer-events: none;
  }
  @keyframes scanDown {
    0%   { top: 10px; opacity: 0; }
    15%  { opacity: 1; }
    85%  { opacity: 1; }
    100% { top: calc(100% - 12px); opacity: 0; }
  }

  .qr-label { text-align: center; font-size: 12px; color: var(--muted); margin-bottom: 24px; direction: ltr; letter-spacing: 0.5px; }

  .sheet-actions { display: flex; gap: 10px; }
  .sheet-btn {
    flex: 1; padding: 14px; border-radius: 14px; border: none;
    font-family: 'Tajawal', sans-serif; font-size: 14px; font-weight: 700;
    cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
    transition: all 0.25s;
  }
  .sheet-btn.primary { background: var(--dark); color: white; }
  .sheet-btn.primary:hover { background: linear-gradient(135deg, var(--gold), var(--gold-light)); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(184,147,42,0.3); }
  .sheet-btn.secondary { background: var(--cream); color: var(--text); border: 1.5px solid var(--border); }
  .sheet-btn.secondary:hover { background: var(--gold-pale); border-color: var(--gold); color: var(--gold); }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .contact-item:nth-child(1) { animation-delay: 0.55s; }
  .contact-item:nth-child(2) { animation-delay: 0.65s; }
  .contact-item:nth-child(3) { animation-delay: 0.75s; }
  .contact-item:nth-child(4) { animation-delay: 0.82s; }
  .contact-item:nth-child(5) { animation-delay: 0.89s; }
</style>
</head>
<body>

<div class="card">
  <!-- HEADER (clickable flip) -->
  <div class="header" onclick="toggleFlip()">
    <div class="gold-line"></div>
    <div class="flip-area" id="flipArea">
      <div class="flip-inner">
        <div class="flip-front">خم</div>
        <div class="flip-back" id="avatarQR"></div>
      </div>
      <div class="flip-hint">↺ اضغط لعرض QR</div>
    </div>
    <div class="header-meta">
      <div class="name">خالد <span>المنصوري</span></div>
      <div class="status-row">
        <div class="status-dot"></div>
        <div class="title">مستشار أعمال استراتيجي</div>
      </div>
      <div class="company-badge">
        <svg width="14" height="14" fill="none" viewBox="0 0 24 24">
          <path d="M3 21h18M3 7v14M21 7v14M6 21V11M10 21V11M14 21V11M18 21V11M3 7l9-4 9 4" stroke="#D4AF5A" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>المنصوري للاستشارات التجارية</span>
      </div>
    </div>
  </div>

  <!-- CONTACTS -->
  <div class="body">
    <div class="section-label">بيانات التواصل</div>
    <div class="contact-list">

      <a class="contact-item" href="tel:+213563497299">
        <div class="icon-wrap phone">
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24">
            <path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 011 1V20a1 1 0 01-1 1C9.61 21 3 14.39 3 4a1 1 0 011-1h3.5a1 1 0 011 1c0 1.25.2 2.45.57 3.57a1 1 0 01-.25 1.02l-2.2 2.2z" stroke="#B8932A" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="contact-info">
          <div class="contact-label">هاتف</div>
          <div class="contact-value">+213 563 497 299</div>
        </div>
        <div class="arrow">←</div>
      </a>

      <a class="contact-item" href="https://wa.me/213563497299" target="_blank">
        <div class="icon-wrap whatsapp">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M17.47 14.38c-.3-.15-1.76-.87-2.03-.96-.28-.1-.48-.15-.68.14-.2.3-.77.96-.95 1.16-.17.2-.35.22-.65.07a8.18 8.18 0 01-2.4-1.48 9.05 9.05 0 01-1.66-2.06c-.17-.3-.02-.46.13-.61.14-.13.3-.35.44-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.02-.52-.08-.15-.68-1.63-.93-2.23-.24-.59-.5-.51-.68-.52H7.7c-.2 0-.52.07-.79.37-.27.3-1.02 1-1.02 2.43s1.04 2.82 1.19 3.01c.14.2 2.05 3.13 4.97 4.39.69.3 1.23.47 1.65.6.69.22 1.32.19 1.82.12.55-.08 1.71-.7 1.95-1.37.24-.68.24-1.26.17-1.38-.07-.12-.27-.19-.57-.34z" fill="#25D366"/>
            <path d="M12 2a10 10 0 00-8.59 15.1L2 22l4.99-1.31A10 10 0 1012 2z" stroke="#25D366" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="contact-info">
          <div class="contact-label">واتساب</div>
          <div class="contact-value">+213 563 497 299</div>
        </div>
        <div class="arrow">←</div>
      </a>

      <a class="contact-item" href="mailto:khalid@almansouri.com">
        <div class="icon-wrap email">
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24">
            <path d="M4 4h16a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2z" stroke="#4CAF50" stroke-width="1.8"/>
            <path d="M22 6l-10 7L2 6" stroke="#4CAF50" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="contact-info">
          <div class="contact-label">البريد الإلكتروني</div>
          <div class="contact-value">khalid@almansouri.com</div>
        </div>
        <div class="arrow">←</div>
      </a>

      <a class="contact-item" href="https://www.almansouri-consulting.com" target="_blank">
        <div class="icon-wrap web">
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" stroke="#7C83FD" stroke-width="1.8"/>
            <path d="M2 12h20M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20" stroke="#7C83FD" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="contact-info">
          <div class="contact-label">الموقع الإلكتروني</div>
          <div class="contact-value">almansouri-consulting.com</div>
        </div>
        <div class="arrow">←</div>
      </a>

      <a class="contact-item" href="https://linkedin.com/in/khalid-almansouri" target="_blank">
        <div class="icon-wrap linkedin">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="2" width="20" height="20" rx="4" stroke="#0A66C2" stroke-width="1.8"/>
            <path d="M7 10v7M7 7v.5" stroke="#0A66C2" stroke-width="2" stroke-linecap="round"/>
            <path d="M11 17v-3.5A1.5 1.5 0 0114 12v5M11 10v1" stroke="#0A66C2" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="contact-info">
          <div class="contact-label">لينكد إن</div>
          <div class="contact-value ar">خالد المنصوري</div>
        </div>
        <div class="arrow">←</div>
      </a>

    </div>
  </div>

  <div class="divider"></div>

  <div class="expertise-section">
    <div class="section-label" style="animation-delay:0.75s">مجالات الخبرة</div>
    <div class="tags">
      <span class="tag">استراتيجية الأعمال</span>
      <span class="tag">التوسع الخليجي</span>
      <span class="tag">دراسات الجدوى</span>
      <span class="tag">تطوير الشراكات</span>
      <span class="tag">إدارة المشاريع</span>
      <span class="tag">الاستثمار العقاري</span>
    </div>
  </div>

  <div class="cta-section">
    <div class="btn-row">
      <button class="btn-save" onclick="saveContact()">
        <svg width="18" height="18" fill="none" viewBox="0 0 24 24">
          <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M17 21v-8H7v8M7 3v5h8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
        حفظ في جهات الاتصال
      </button>
      <button class="btn-qr" onclick="openQR()" title="عرض QR Code">
        <svg width="22" height="22" fill="none" viewBox="0 0 24 24">
          <rect x="3" y="3" width="7" height="7" rx="1.5" stroke="currentColor" stroke-width="1.8"/>
          <rect x="14" y="3" width="7" height="7" rx="1.5" stroke="currentColor" stroke-width="1.8"/>
          <rect x="3" y="14" width="7" height="7" rx="1.5" stroke="currentColor" stroke-width="1.8"/>
          <path d="M14 14h2v2h-2zM18 14h3M14 18h2v3h-2zM18 18h1v1h-1zM20 20h1v1h-1z" stroke="currentColor" stroke-width="0.1" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="footer">
    <p>© 2025 &nbsp;|&nbsp; <strong>المنصوري للاستشارات التجارية</strong> &nbsp;|&nbsp; الرياض — دبي</p>
  </div>
</div>

<!-- QR BOTTOM SHEET -->
<div class="qr-overlay" id="qrOverlay" onclick="handleOverlayClick(event)">
  <div class="qr-sheet" id="qrSheet">
    <div class="sheet-handle"></div>
    <div class="qr-title">امسح للتواصل الفوري</div>
    <div class="qr-sub">وجّه كاميرا هاتفك نحو الكود أدناه</div>

    <div class="qr-frame-wrap">
      <div class="qr-gold-frame">
        <div class="qr-inner" id="mainQR"></div>
        <div class="scan-line"></div>
      </div>
    </div>

    <div class="qr-label">wa.me/213563497299</div>

    <div class="sheet-actions">
      <button class="sheet-btn primary" onclick="saveContact()">
        <svg width="15" height="15" fill="none" viewBox="0 0 24 24">
          <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M17 21v-8H7v8M7 3v5h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        حفظ جهة الاتصال
      </button>
      <button class="sheet-btn secondary" onclick="copyNumber()">
        <svg width="15" height="15" fill="none" viewBox="0 0 24 24">
          <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="1.8"/>
          <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
        <span id="copyTxt">نسخ الرقم</span>
      </button>
    </div>
  </div>
</div>

<script>
const WHATSAPP_URL = 'https://wa.me/213563497299';
const PHONE = '+213563497299';
let mainQRDone = false, avatarQRDone = false;

function makeQR(id, size) {
  new QRCode(document.getElementById(id), {
    text: WHATSAPP_URL, width: size, height: size,
    colorDark: '#1A1A1A', colorLight: '#FFFFFF',
    correctLevel: QRCode.CorrectLevel.H
  });
}

function toggleFlip() {
  const area = document.getElementById('flipArea');
  area.classList.toggle('flipped');
  if (!avatarQRDone) {
    setTimeout(() => { makeQR('avatarQR', 80); avatarQRDone = true; }, 100);
  }
}

function openQR() {
  document.getElementById('qrOverlay').classList.add('open');
  if (!mainQRDone) {
    setTimeout(() => { makeQR('mainQR', 176); mainQRDone = true; }, 80);
  }
}
function closeQR() { document.getElementById('qrOverlay').classList.remove('open'); }
function handleOverlayClick(e) { if (e.target === document.getElementById('qrOverlay')) closeQR(); }

function saveContact() {
  const v = `BEGIN:VCARD\r\nVERSION:3.0\r\nFN:خالد المنصوري\r\nN:المنصوري;خالد;;;\r\nORG:المنصوري للاستشارات التجارية\r\nTITLE:مستشار أعمال استراتيجي\r\nTEL;TYPE=CELL:+213563497299\r\nEMAIL:khalid@almansouri.com\r\nURL:https://www.almansouri-consulting.com\r\nEND:VCARD`;
  const a = Object.assign(document.createElement('a'), {
    href: URL.createObjectURL(new Blob([v], {type:'text/vcard;charset=utf-8'})),
    download: 'khalid-almansouri.vcf'
  });
  a.click();
  document.querySelectorAll('.btn-save,.sheet-btn.primary').forEach(b => {
    const o = b.innerHTML;
    b.innerHTML = '<svg width="15" height="15" fill="none" viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg> تم الحفظ!';
    b.style.background = 'linear-gradient(135deg,#1a6b3a,#2e9e5b)';
    setTimeout(() => { b.innerHTML = o; b.style.background = ''; }, 2500);
  });
}

function copyNumber() {
  navigator.clipboard.writeText(PHONE).then(() => {
    const el = document.getElementById('copyTxt');
    el.textContent = 'تم النسخ ✓';
    setTimeout(() => el.textContent = 'نسخ الرقم', 2000);
  });
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeQR(); });
</script>
</body>
</html>
